<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ | THE SCENERY VINTAGE FARM</title>
<base href="/-/">
<link rel="stylesheet" href="style.css">

<link rel="manifest" href="/-/manifest.json">
<meta name="theme-color" content="#111111">
<link rel="icon" href="/-/icon-192.png">

</head>
<body>
<div class="page">
  <div class="header">
    <div class="header-left">
      <h1>‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h1>
      <h2>THE SCENERY VINTAGE FARM</h2>
    </div>
    <div class="header-right">
      <div>
        <label>‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</label>
        <input type="month" id="monthPicker">
      </div>
      <div>
        <label>‡πÅ‡∏ú‡∏ô‡∏Å</label>
        <input type="text">
      </div>
    </div>
  </div>

  <div class="card">
    <table>
      <thead>
        <tr>
          <th>‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
          <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
          <th>‡∏£‡∏π‡∏õ</th>
          <th>‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
          <th>‡∏™‡∏ï‡πá‡∏≠‡∏Å</th>
          <th>‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</th>
          <th>‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°</th>
          <th>‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
          <th>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</th>
          <th>‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢</th>
          <th>‡∏•‡∏ö</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>

    <button class="btn add" onclick="addRow()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
    <button class="btn add" onclick="copyWithPrompt()">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
  </div>

  <!-- SUMMARY (same position as original) -->
  <div class="actions">
    <strong>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô <span id="grand">0.00</span> ‡∏ö‡∏≤‡∏ó</strong>
    <button class="btn-print" onclick="printPDF()">üñ® ‡∏û‡∏¥‡∏°‡∏û‡πå / Save PDF</button>
  </div>
</div>

<!-- COPY MODAL -->
<div class="modal" id="copyModal">
  <div class="modal-box animate">
    <h3>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>
    <label>‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</label>
    <input type="month" id="copyFrom">
    <label>‡πÑ‡∏õ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</label>
    <input type="month" id="copyTo">
    <div class="modal-actions">
      <button class="btn ghost" onclick="closeCopy()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      <button class="btn add" onclick="confirmCopy()">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
    </div>
  </div>
</div>

<!-- DELETE MODAL -->
<div class="modal" id="deleteModal">
  <div class="modal-box animate">
    <div class="trash-big">üóë</div>
    <h3>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö</h3>
    <p>‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà</p>
    <div class="modal-actions">
      <button class="btn ghost" onclick="closeDelete()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      <button class="btn danger" onclick="confirmDelete()">‡∏•‡∏ö</button>
    </div>
  </div>
</div>

<script src="script.js"></script>

<script>
// === PWA INSTALL (NO UI / LOGIC CHANGE) ===
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/-/sw.js');
  });
}

let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;

  const btn = document.createElement('button');
  btn.textContent = '‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏õ';
  btn.style.cssText =
    'position:fixed;bottom:20px;left:20px;padding:10px 16px;' +
    'border-radius:12px;border:none;background:#111;color:#fff;z-index:9999';

  btn.onclick = async () => {
    btn.remove();
    deferredPrompt.prompt();
    await deferredPrompt.userChoice;
    deferredPrompt = null;
  };

  document.body.appendChild(btn);
});
</script>

</body>
</html>
